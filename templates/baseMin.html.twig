<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}Administration Gift & Fun!
			{% endblock %}
		</title>

		<!-- Favicons -->
		<link
		rel="icon" href="{{ asset('images/logo.png') }}" type="image/png">

		<!-- CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
		<script src="https://cdn.tailwindcss.com"></script>

		{% block stylesheets %}
			<style>
				/* Forcer l'affichage de l'item actif du carousel */
				[data-carousel-item="active"] {
					display: block !important;
				}
			</style>
		{% endblock %}
	</head>

	<body class="bg-gray-50">

		<main>
			{% block body %}{% endblock %}
		</main>


		<!-- SCRIPTS -->
		{% block javascripts %}
			<script src="https://cdn.jsdelivr.net/npm/flowbite@2.3.0/dist/flowbite.min.js"></script>
			{% block importmap %}
				{{ importmap('app') }}
			{% endblock %}
		{% endblock %}

		<!-- Script de réinitialisation du carousel -->
		<script>
			document.addEventListener('DOMContentLoaded', function () { // Réinitialiser le carousel à chaque chargement de page
const carouselElement = document.getElementById('controls-carousel');

if (carouselElement) { // Forcer l'affichage de l'item actif
const items = carouselElement.querySelectorAll('[data-carousel-item]');
items.forEach((item) => {
if (item.getAttribute('data-carousel-item') === 'active') {
item.classList.remove('hidden');
} else {
item.classList.add('hidden');
}
});

// Réinitialiser Flowbite carousel si disponible
if (typeof Carousel !== 'undefined') {
const itemsArray = Array.from(items).map((item, index) => ({position: index, el: item}));

const options = {
defaultPosition: Array.from(items).findIndex(item => item.getAttribute('data-carousel-item') === 'active'),
interval: 10000,
indicators: {
items: []
}
};

const carousel = new Carousel(carouselElement, itemsArray, options);
carousel.cycle();
}
}
});

// Masquer les boutons de review (si widget externe)
let attempts = 0;
const maxAttempts = 20;

const hideReviewButton = setInterval(function () {
const buttons = document.querySelectorAll('button');
let found = false;

buttons.forEach(button => {
if (button.textContent.includes('Leave a review') || button.textContent.includes('Laisser un avis')) {
button.style.display = 'none';
found = true;
}
});

attempts++;
if (found || attempts >= maxAttempts) {
clearInterval(hideReviewButton);
}
}, 200);

// Observer pour les éléments ajoutés dynamiquement
const observer = new MutationObserver(function (mutations) {
const buttons = document.querySelectorAll('button');
buttons.forEach(button => {
if (button.textContent.includes('Leave a review') || button.textContent.includes('Laisser un avis')) {
button.style.display = 'none';
}
});
});

observer.observe(document.body, {
childList: true,
subtree: true,
attributes: true
});
		</script>
	</body>
</html>
